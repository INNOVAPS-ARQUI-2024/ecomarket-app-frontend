<div class="container">
    <h2>Mis productos a la venta</h2>

    <div class="actions-header">
        <button class="add-btn" [routerLink]="['/formularios/producto']">A√±adir +</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>IMAGEN</th>
                <th>NOMBRE</th>
                <th>PRECIO</th>
                <th>FECHA DE PUBLICACI√ìN</th>
                <th>VENDIDOS</th> <!-- Nuevo campo para mostrar vendidos -->
                <th>ACCIONES</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let producto of productos">
                <!-- Mostrar la imagen si est√° disponible -->
                <td>
                    <img [src]="producto.picture ? 'data:image/jpeg;base64,' + producto.picture : 'default-image.jpg'"
                         alt="{{ producto.name }}"
                         class="product-image"
                         *ngIf="producto.picture; else noImage" />
                    <ng-template #noImage><span>No Image</span></ng-template>
                </td>
                <td>{{ producto.name }}</td>
                <td>{{ producto.price | currency: 'USD':true }}</td>
                <td>{{ producto.createdAt | date: 'dd-MMM-yyyy' }}</td>
                <td>{{ producto.sold || 0 }}</td> <!-- Mostrar unidades vendidas -->
                <td>
                    <!-- Mostrar ambos botones si no se ha recibido ning√∫n par√°metro 'action' -->
                    <ng-container *ngIf="!action">
                        <button class="edit-btn" (click)="modificarProducto(producto.productId!)">‚úèÔ∏è</button>
                        <button class="delete-btn" (click)="eliminarProducto(producto.productId!)">üóëÔ∏è Eliminar</button>
                    </ng-container>

                    <!-- Mostrar solo el bot√≥n de modificar si 'action' es 'modificar' -->
                    <button class="edit-btn" *ngIf="action === 'modificar'"
                        (click)="modificarProducto(producto.productId!)">‚úèÔ∏è</button>

                    <!-- Mostrar solo el bot√≥n de eliminar si 'action' es 'eliminar' -->
                    <button class="delete-btn" *ngIf="action === 'eliminar'"
                        (click)="eliminarProducto(producto.productId!)">üóëÔ∏è Eliminar</button>

                </td>
            </tr>
        </tbody>
    </table>

    <div class="back-btn-container">
        <button class="back-btn" (click)="goBack()">Volver a la p√°gina principal</button>
    </div>
</div>
